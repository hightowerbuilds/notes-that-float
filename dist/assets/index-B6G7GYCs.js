import{r as o,_ as F,u as k,j as e,C as A,O as R,a as I,T as y,N as T,S as D}from"./index-CS6foN-R.js";function z(i,s){const f=i+"Geometry";return o.forwardRef(({args:d,children:p,...n},j)=>{const r=o.useRef(null);return o.useImperativeHandle(j,()=>r.current),o.useLayoutEffect(()=>void(s==null?void 0:s(r.current))),o.createElement("mesh",F({ref:r},n),o.createElement(f,{attach:"geometry",args:d}),p)})}const w=z("box");function P({label:i,value:s,type:f="text",placeholder:d,position:p,isActive:n,onFocus:j}){const[r,u]=o.useState(!1),c=()=>{u(!0),j()};return e.jsxs("group",{position:p,children:[e.jsx(y,{position:[-1.5,.3,.1],fontSize:.15,color:"#ffffff",anchorX:"left",anchorY:"middle",font:"/fonts/Courier.ttf",children:i}),e.jsx(w,{args:[3,.4,.05],position:[0,0,.1],onClick:c,onPointerOver:l=>{document.body.style.cursor="pointer",l.object.scale.setScalar(1.02)},onPointerOut:l=>{document.body.style.cursor="default",l.object.scale.setScalar(1)},children:e.jsx("meshStandardMaterial",{color:n||r?"#00f3ff":"#ffffff",opacity:n||r?.3:.1,transparent:!0})}),e.jsx(y,{position:[0,0,.15],fontSize:.12,color:"#ffffff",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",maxWidth:2.8,children:f==="password"&&s?"â€¢".repeat(s.length):s||d})]})}function M({isLogin:i,username:s,password:f,handleSubmit:d,loading:p,successMessage:n,localError:j,toggleMode:r,activeInput:u,setActiveInput:c,showForm:l}){const g=o.useRef(null);I(t=>{g.current&&(g.current.position.y=Math.sin(t.clock.elapsedTime*.5)*.1,g.current.rotation.y=Math.sin(t.clock.elapsedTime*.3)*.1)});const m=t=>{t&&typeof t.preventDefault=="function"&&t.preventDefault(),d(t)};return l?e.jsxs("group",{ref:g,position:[0,-2,0],children:[n&&e.jsx(y,{position:[0,2.2,.1],fontSize:.15,color:"#86efac",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",maxWidth:3.5,children:n}),e.jsx(P,{label:i?"USERNAME":"NEW USERNAME",value:s,type:"text",placeholder:"Enter your username",position:[0,.4,0],isActive:u==="username",onFocus:()=>c("username")}),e.jsx(P,{label:i?"PASSWORD":"NEW PASSWORD",value:f,type:"password",placeholder:"Enter your password",position:[0,-.2,0],isActive:u==="password",onFocus:()=>c("password")}),j&&e.jsx(y,{position:[0,-.8,.1],fontSize:.12,color:"#fca5a5",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",maxWidth:3.5,children:"not a good password"}),e.jsx(w,{args:[.83,.2,.03],position:[-.65,-.9,.1],onClick:t=>{t.stopPropagation(),m(t)},onPointerOver:t=>{document.body.style.cursor="pointer",t.object.scale.setScalar(1.05)},onPointerOut:t=>{document.body.style.cursor="default",t.object.scale.setScalar(1)},children:e.jsx("meshStandardMaterial",{color:p?"#666666":i?"#00ff00":"#00f3ff",opacity:.8,transparent:!0})}),e.jsx(y,{position:[-.65,-.9,.17],fontSize:.1,color:"#ffffff",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",children:p?i?"SIGNING IN...":"CREATING ACCOUNT...":i?"SIGN IN":"CREATE ACCOUNT"}),e.jsx(w,{args:[.33,.13,.02],position:[.65,-.9,.1],onClick:t=>{t.stopPropagation(),r()},onPointerOver:t=>{document.body.style.cursor="pointer",t.object.scale.setScalar(1.05)},onPointerOut:t=>{document.body.style.cursor="default",t.object.scale.setScalar(1)},children:e.jsx("meshStandardMaterial",{color:"#666666",opacity:.6,transparent:!0})}),e.jsx(y,{position:[.65,-.9,.133],fontSize:.067,color:"#ffffff",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",children:"BACK"})]}):e.jsxs("group",{ref:g,position:[0,-1,0],children:[e.jsx(w,{args:[.83,.27,.03],position:[0,.2,.1],onClick:t=>{t.stopPropagation(),r("signup")},onPointerOver:t=>{document.body.style.cursor="pointer",t.object.scale.setScalar(1.05)},onPointerOut:t=>{document.body.style.cursor="default",t.object.scale.setScalar(1)},children:e.jsx("meshStandardMaterial",{color:"#00f3ff",opacity:.8,transparent:!0})}),e.jsx(y,{position:[0,.2,.17],fontSize:.12,color:"#ffffff",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",children:"NEW USER"}),e.jsx(w,{args:[.83,.27,.03],position:[0,-.2,.1],onClick:t=>{t.stopPropagation(),r("login")},onPointerOver:t=>{document.body.style.cursor="pointer",t.object.scale.setScalar(1.05)},onPointerOut:t=>{document.body.style.cursor="default",t.object.scale.setScalar(1)},children:e.jsx("meshStandardMaterial",{color:"#00ff00",opacity:.8,transparent:!0})}),e.jsx(y,{position:[0,-.2,.17],fontSize:.12,color:"#ffffff",anchorX:"center",anchorY:"middle",font:"/fonts/Courier.ttf",children:"LOGIN"})]})}function W({}){const{login:i,signup:s,error:f,clearError:d,loading:p}=k(),[n,j]=o.useState(!1),[r,u]=o.useState(""),[c,l]=o.useState(""),[g,m]=o.useState(""),[t,b]=o.useState(""),[h,E]=o.useState(null),[v,C]=o.useState(!1);o.useEffect(()=>{d(),m(""),b("")},[n,d]),o.useEffect(()=>{console.log("AuthForm: Error state changed:",f),f&&console.log("AuthForm: Error displayed:",f)},[f]);const N=async x=>{if(x&&typeof x.preventDefault=="function"&&x.preventDefault(),console.log("handleSubmit called with:",{isLogin:n,username:r,password:c}),!r.trim()||!c.trim()){console.log("Validation failed - empty fields"),b("Please enter both username and password");return}if(b(""),console.log("Starting auth process..."),n)try{console.log("Attempting login..."),await i(r,c),m("Successfully logged in!"),setTimeout(()=>{u(""),l(""),m(""),C(!1)},2e3)}catch(a){console.error("Login error:",a),b("Password or username not found")}else try{console.log("Attempting signup..."),await s(r,c),m("Account created successfully!"),setTimeout(()=>{u(""),l(""),m(""),C(!1)},2e3)}catch(a){console.error("Signup error:",a),b("Failed to create account")}},O=x=>{v?(C(!1),u(""),l(""),d(),m(""),b(""),E(null)):(j(x==="login"),C(!0))};return o.useEffect(()=>{const x=a=>{h&&v&&(a.key==="Enter"?N(a):a.key==="Tab"?(a.preventDefault(),h==="username"?E("password"):h==="password"&&E("username")):a.key==="Escape"?E(null):a.key.length===1?h==="username"?u(S=>S+a.key):h==="password"&&l(S=>S+a.key):a.key==="Backspace"&&(h==="username"?u(S=>S.slice(0,-1)):h==="password"&&l(S=>S.slice(0,-1))))};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[h,v,r,c,n,p]),e.jsx("div",{className:"auth-form-container",children:e.jsx("div",{className:"auth-form-3d-wrapper",children:e.jsxs(A,{camera:{position:[0,0,2],fov:60},style:{width:"100%",height:"100%",background:"transparent"},children:[e.jsx("ambientLight",{intensity:.4}),e.jsx("pointLight",{position:[10,10,10],intensity:1}),e.jsx("pointLight",{position:[-10,-10,-10],intensity:.5}),e.jsx(M,{isLogin:n,username:r,password:c,handleSubmit:N,loading:p,successMessage:g,localError:t,toggleMode:O,activeInput:h,setActiveInput:E,showForm:v}),e.jsx(R,{enablePan:!1,enableZoom:!0,enableRotate:!0,minDistance:.5,maxDistance:15,autoRotate:!1,target:[0,0,0]})]})})})}const Y=function(){const{user:s}=k();return e.jsxs("div",{className:`page-container ${s?"":"no-navbar"}`,children:[s&&e.jsx(T,{}),e.jsx(A,{style:{position:"fixed",zIndex:0,top:0,left:0,width:"100%",height:"100vh"},children:e.jsx(D,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0,speed:1})}),e.jsx("main",{className:"main-content",children:e.jsxs("div",{className:`home-content ${s?"":"unauthenticated"}`,children:[!s&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"site-heading",children:"hightowerbuilds.com"}),e.jsx(W,{})]}),s&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"welcome-title-3d",children:"Welcome to hightowerbuilds"}),e.jsx("p",{className:"quote-text-3d",children:"This project's intentions are of wide berth and are currently sprawling as such. Its inspirations go deep and are free to roam through all modalities. Please look around and interact."})]})]})})]})};export{Y as component};
